-# When rendering inside rails_email_preview hide nav, and hide irrelevant things from the form
javascript:
  jQuery(function($) {
    if (window.parent && /email/.test(parent.location.href)) {
      // Hide nav:
      $('.left-column,.right-column').hide();
      $('.center-column').css('margin', 0);

      // Snippet form:
      // Hide identifier and categories
      $('[name="snippet[identifier]"]').closest('.control-group').hide();
      $('label[for="snippet_"]').closest('.control-group').hide();
      // Label to Subject
      $('[name="snippet[label]"]').closest('.control-group').find('.control-label').text("Subject");
      // Content to Body
      $('[name="snippet[content]"]').closest('.control-group').find('.control-label').text("Body");
      // Do not mess with identifier
      $('[data-slug]').removeAttr('data-slug');
    }
  });
